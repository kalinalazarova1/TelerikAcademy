<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Deep Copy</title>
    <link href="js-console.min.css" rel="stylesheet" />
</head>
<body>
    <!--Write a function that makes a deep copy of an object
        The function should work for both primitive and reference types-->
    <div id="js-console">
    </div>
    <script src="js-console.js"></script>
    <script>
        var myArr = new Array(2, 3, new Array(4, 5, 6), 7);
        var num = 5;
        function deepCopy(obj) {
            if (typeof obj == typeof new Object()) {
                if (obj instanceof Array) var copy = [];
                else var copy = new Object();
                for (p in obj) {
                    if (typeof obj[p] == typeof new Object()) copy[p] = deepCopy(obj[p]);
                    else copy[p] = obj[p];
                }
                return copy;
            }
            else return obj;
        }

        window.onload = function () {
            var numCopy = deepCopy(num);
            var myArrCopy = deepCopy(myArr);
            myArrCopy[2].push(15);
            numCopy = 7;
            jsConsole.writeLine("Original: " + myArr.join(","));
            jsConsole.writeLine("Copy: " + myArrCopy.join(","));
            jsConsole.writeLine("Original: " + num);
            jsConsole.writeLine("Copy: " + numCopy);
        }
    </script>
</body>
</html>
