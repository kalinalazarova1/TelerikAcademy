<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Binary search</title>
    <link href="js-console.min.css" rel="stylesheet" />
</head>
<body>
    <!--Write a program that finds the index of given element in a sorted array of integers by using the binary
         search algorithm (find it in Wikipedia)-->
    <div id="js-console">
        <label for="number-input1">Input array of numbers separated by spaces and press Enter: </label><br />
        <input type="text" id="number-input1" onkeydown="OnEnterKeyPressed(event)" />
        <br />
        <label for="number-input2">Input a value and press Enter: </label><br />
        <input type="text" id="number-input2" onkeydown="OnEnterKeyPressed(event)" />
        <br />
    </div>
    <script src="js-console.js"></script>
    <script>
        window.onload = function () {
            document.getElementById("number-input1").focus();
        }

        function BinarySearch() {
            var arr = jsConsole.read("input#number-input1").split(' ');
            arr.sort(function (x, y) { return x - y; });
            jsConsole.writeLine("The sorted array is: " + arr.join(' '));
            var value = jsConsole.readFloat("input#number-input2");
            if (!value && value !== 0) {
                jsConsole.writeLine("Invalid search value.");
                return;
            }
            var r = arr.length - 1;
            for (var l = 0; l <= r;)
            {
                var m = parseInt((l + r) / 2);
                if (arr[m] < value)
                {
                    l = m + 1;
                }
                else if (arr[m] > value)
                {
                    r = m - 1;
                }
                else
                {
                    jsConsole.writeLine("The index of the element in the sorted array is: " + m);
                    return;
                }
            }
            jsConsole.writeLine("There is no such element in the array.");
        }

        function OnEnterKeyPressed(event) {
            if (event.keyCode == 13) {
                if (document.activeElement == document.getElementById("number-input1")) {
                    document.getElementById("number-input2").focus();
                }
                else {
                    BinarySearch();
                }
            }
        }
    </script>
</body>
</html>